<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Helper</title>
    <!-- Link to the CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Link to Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Include jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>
    <h1>Job Application Helper</h1>
    
    <!-- Input Form -->
    <form method="post">
        <!-- Name Input -->
        <label for="name">Your Name:</label>
        <input type="text" id="name" name="name" required>
        <br>

        <!-- Education Input -->
        <label for="education">Your Education:</label>
        <input type="text" id="education" name="education" required>
        <br>

        <!-- Professional Experience Input -->
        <label for="experience">Your Professional Experience:</label>
        <input type="text" id="experience" name="experience" required>
        <br>

        <!-- Website URL Input -->
        <!-- label for="user_website">User Personal Website URL (optional):</label>
        <input type="text" id="user_website" name="user_website">
        <br> -->

        <!-- Personal Write-Up Input -->
        <label for="user_writeup">Your Personal Write-Up:</label>
        <textarea id="user_writeup" name="user_writeup" rows="6" cols="50" required></textarea>
        <br>

        <!-- Job Description Input -->
        <label for="job_description">Job Description URL:</label>
        <input type="text" id="job_description" name="job_description" required>
        <br>

        <!-- Submit Button -->
        <button type="submit">Submit</button>
    </form>

    {% if skill_matching_results %}
    <section class="result-section">
        <h2>Skill Matching Results</h2>
        <div id="skill-results" class="markdown-output">
            {{ skill_matching_results | safe }}
        </div>
        <h3>Key Skills Matching Score {{ skill_matching_score | safe }}</h3>
    </section>
    {% endif %}

{% if resume %}
    <section class="result-section">
        <h2>Content Generation Results</h2>
        <div id="resume-results" class="markdown-output">
            {{ resume | safe }}
        </div>
    </section>
{% endif %}

{% if cover_letter %}
    <section class="result-section">
        <h2>Content Generation Results</h2>
        <div id="cover-results" class="markdown-output">
            {{ cover_letter | safe }}
        </div>
    </section>
{% endif %}

<!-- Button to trigger PDF generation -->
{% if resume and cover_letter %}
<button id="download-pdf" onclick="downloadPdf()">Download PDF</button>
{% endif %}

<script>
    function downloadPdf() {
        const resumeContent = document.getElementById('resume-results').innerText;
        const coverLetterContent = document.getElementById('cover-results').innerText;

        // Create a form to send the resume and cover letter content to the server
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = '/download-pdf';

        // Append resume and cover letter content to the form
        const resumeInput = document.createElement('input');
        resumeInput.type = 'hidden';
        resumeInput.name = 'resume';
        resumeInput.value = resumeContent;
        form.appendChild(resumeInput);

        const coverLetterInput = document.createElement('input');
        coverLetterInput.type = 'hidden';
        coverLetterInput.name = 'cover_letter';
        coverLetterInput.value = coverLetterContent;
        form.appendChild(coverLetterInput);

        // Append the form to the document body and submit it
        document.body.appendChild(form);
        form.submit();
    }
</script>

</body>
</html>



    <!-- Resume and Cover Letter
    {% if resume %}
        <h2>Generated Resume</h2>
        <pre>{{ resume }}</pre>
    {% endif %}
    
    {% if cover_letter %}
        <h2>Generated Cover Letter</h2>
        <pre>{{ cover_letter }}</pre>
    {% endif %} -->
